{"filter":false,"title":"addresses_controller.rb","tooltip":"/app/controllers/addresses_controller.rb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":1,"column":69},"end":{"row":2,"column":46},"action":"insert","lines":["","  before_action :check_community, only: [:new]"],"id":2,"ignore":true},{"start":{"row":58,"column":0},"end":{"row":118,"column":0},"action":"insert","lines":["    Business.where([\"address_id = ?\", @address.address_id]).each do |business|","      business.destroy","    end","    Contact.where([\"address_id = ?\", @address.address_id]).each do |contact|","      Business.where([\"prim_contact_id = ?\", contact.contact_id]).each do |business|","        business.destroy","      end","      Business.where([\"sec_contact_id = ?\", contact.contact_id]).each do |business|","        business.destroy","      end","      Interaction.where([\"contact_id = ?\", contact.contact_id]).each do |interaction|","        interaction.destroy","      end","      InvestorPref.where([\"contact_id = ?\", contact.contact_id]).each do |investor_pref|","        investor_pref.destroy","      end","      Property.where([\"owner = ?\", contact.contact_id]).each do |property|","        Image.where([\"property_id = ?\", property.property_id]).each do |image|","          image.destroy","        end","        Interaction.where([\"property_id = ?\", property.property_id]).each do |interaction|","          interaction.destroy","        end","        PropDoc.where([\"property_id = ?\", property.property_id]).each do |prop_doc|","          prop_doc.destroy","        end","        RentalUnit.where([\"property_id = ?\", property.property_id]).each do |rental_unit|","          rental_unit.destroy","        end","        Transaction.where([\"property_id = ?\", property.property_id]).each do |transaction|","          transaction.destroy","        end","        property.destroy","      end","      RentalUnit.where([\"tenant = ?\", contact.contact_id]).each do |rental_unit|","        rental_unit.destroy","      end","      Transaction.where([\"purchased_by = ?\", contact.contact_id]).each do |transaction|","        transaction.destroy","      end","      contact.destroy","    end","    Property.where([\"address_id = ?\", @address.address_id]).each do |property|","      Image.where([\"property_id = ?\", property.property_id]).each do |image|","        image.destroy","      end","      Interaction.where([\"property_id = ?\", property.property_id]).each do |interaction|","        interaction.destroy","      end","      PropDoc.where([\"property_id = ?\", property.property_id]).each do |prop_doc|","        prop_doc.destroy","      end","      RentalUnit.where([\"property_id = ?\", property.property_id]).each do |rental_unit|","        rental_unit.destroy","      end","      Transaction.where([\"property_id = ?\", property.property_id]).each do |transaction|","        transaction.destroy","      end","      property.destroy","    end",""]},{"start":{"row":129,"column":7},"end":{"row":136,"column":7},"action":"insert","lines":["","    ","    def check_community","      unless Community.all.size > 0","        flash[:error] = \"You need a community first!\"","        redirect_to new_community_path","      end","    end"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":6},"end":{"row":0,"column":25},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1508606758994,"hash":"1fa944afc163a9a6285558f701c80ff358a73159"}